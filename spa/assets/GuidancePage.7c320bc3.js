import{c as D,o as pe,h as f,as as ne,r as A,a as g,Q as ve,w as fe,R as me,k as Q,G as ge,H as N,v as he,I as _e,J as V,K as F,N as Y,s as O,O as z,p as be,bh as ye,b as k,x as Ce,bi as ae,e as K,i as Se,bj as re,S as xe,U as we,D as qe,j as Pe,X as Te,a4 as Ae,a5 as B,ai as ke,a8 as P,a7 as w,a6 as $,ae as T,a9 as R,ah as h,aa as L}from"./index.8ae906f5.js";import{g as X,s as J}from"./touch.3df10340.js";import{c as Ie}from"./selection.91d8b482.js";import{u as Z,w as Ne}from"./xlsx.db07aefa.js";var Be=D({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:n,emit:u}){let d=!1,o,t,a=null,i=null,m,y;function p(){o&&o(),o=null,d=!1,a!==null&&(clearTimeout(a),a=null),i!==null&&(clearTimeout(i),i=null),t!==void 0&&t.removeEventListener("transitionend",m),m=null}function _(s,r,c){r!==void 0&&(s.style.height=`${r}px`),s.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,d=!0,o=c}function v(s,r){s.style.overflowY=null,s.style.height=null,s.style.transition=null,p(),r!==y&&u(r)}function S(s,r){let c=0;t=s,d===!0?(p(),c=s.offsetHeight===s.scrollHeight?0:void 0):(y="hide",s.style.overflowY="hidden"),_(s,c,r),a=setTimeout(()=>{a=null,s.style.height=`${s.scrollHeight}px`,m=C=>{i=null,(Object(C)!==C||C.target===s)&&v(s,"show")},s.addEventListener("transitionend",m),i=setTimeout(m,e.duration*1.1)},100)}function x(s,r){let c;t=s,d===!0?p():(y="show",s.style.overflowY="hidden",c=s.scrollHeight),_(s,c,r),a=setTimeout(()=>{a=null,s.style.height=0,m=C=>{i=null,(Object(C)!==C||C.target===s)&&v(s,"hide")},s.addEventListener("transitionend",m),i=setTimeout(m,e.duration*1.1)},100)}return pe(()=>{d===!0&&p()}),()=>f(ne,{css:!1,appear:e.appear,onEnter:S,onLeave:x},n.default)}}),oe=D({name:"StepHeader",props:{stepper:{},step:{},goToPanel:Function},setup(e,{attrs:n}){const{proxy:{$q:u}}=Q(),d=A(null),o=g(()=>e.stepper.modelValue===e.step.name),t=g(()=>{const r=e.step.disable;return r===!0||r===""}),a=g(()=>{const r=e.step.error;return r===!0||r===""}),i=g(()=>{const r=e.step.done;return t.value===!1&&(r===!0||r==="")}),m=g(()=>{const r=e.step.headerNav,c=r===!0||r===""||r===void 0;return t.value===!1&&e.stepper.headerNav&&c}),y=g(()=>e.step.prefix&&(o.value===!1||e.stepper.activeIcon==="none")&&(a.value===!1||e.stepper.errorIcon==="none")&&(i.value===!1||e.stepper.doneIcon==="none")),p=g(()=>{const r=e.step.icon||e.stepper.inactiveIcon;if(o.value===!0){const c=e.step.activeIcon||e.stepper.activeIcon;return c==="none"?r:c||u.iconSet.stepper.active}if(a.value===!0){const c=e.step.errorIcon||e.stepper.errorIcon;return c==="none"?r:c||u.iconSet.stepper.error}if(t.value===!1&&i.value===!0){const c=e.step.doneIcon||e.stepper.doneIcon;return c==="none"?r:c||u.iconSet.stepper.done}return r}),_=g(()=>{const r=a.value===!0?e.step.errorColor||e.stepper.errorColor:void 0;if(o.value===!0){const c=e.step.activeColor||e.stepper.activeColor||e.step.color;return c!==void 0?c:r}return r!==void 0?r:t.value===!1&&i.value===!0?e.step.doneColor||e.stepper.doneColor||e.step.color||e.stepper.inactiveColor:e.step.color||e.stepper.inactiveColor}),v=g(()=>"q-stepper__tab col-grow flex items-center no-wrap relative-position"+(_.value!==void 0?` text-${_.value}`:"")+(a.value===!0?" q-stepper__tab--error q-stepper__tab--error-with-"+(y.value===!0?"prefix":"icon"):"")+(o.value===!0?" q-stepper__tab--active":"")+(i.value===!0?" q-stepper__tab--done":"")+(m.value===!0?" q-stepper__tab--navigation q-focusable q-hoverable":"")+(t.value===!0?" q-stepper__tab--disabled":"")),S=g(()=>e.stepper.headerNav!==!0?!1:m.value);function x(){d.value!==null&&d.value.focus(),o.value===!1&&e.goToPanel(e.step.name)}function s(r){r.keyCode===13&&o.value===!1&&e.goToPanel(e.step.name)}return()=>{const r={class:v.value};m.value===!0&&(r.onClick=x,r.onKeyup=s,Object.assign(r,t.value===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:n.tabindex||0}));const c=[f("div",{class:"q-focus-helper",tabindex:-1,ref:d}),f("div",{class:"q-stepper__dot row flex-center q-stepper__line relative-position"},[f("span",{class:"row flex-center"},[y.value===!0?e.step.prefix:f(ve,{name:p.value})])])];if(e.step.title!==void 0&&e.step.title!==null){const C=[f("div",{class:"q-stepper__title"},e.step.title)];e.step.caption!==void 0&&e.step.caption!==null&&C.push(f("div",{class:"q-stepper__caption"},e.step.caption)),c.push(f("div",{class:"q-stepper__label q-stepper__line relative-position"},C))}return fe(f("div",r,c),[[me,S.value]])}}});function De(e){const n=[.06,6,50];return typeof e=="string"&&e.length&&e.split(":").forEach((u,d)=>{const o=parseFloat(u);o&&(n[d]=o)}),n}var Ee=ge({name:"touch-swipe",beforeMount(e,{value:n,arg:u,modifiers:d}){if(d.mouse!==!0&&N.has.touch!==!0)return;const o=d.mouseCapture===!0?"Capture":"",t={handler:n,sensitivity:De(u),direction:X(d),noop:he,mouseStart(a){J(a,t)&&_e(a)&&(V(t,"temp",[[document,"mousemove","move",`notPassive${o}`],[document,"mouseup","end","notPassiveCapture"]]),t.start(a,!0))},touchStart(a){if(J(a,t)){const i=a.target;V(t,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","notPassiveCapture"],[i,"touchend","end","notPassiveCapture"]]),t.start(a)}},start(a,i){N.is.firefox===!0&&F(e,!0);const m=Y(a);t.event={x:m.left,y:m.top,time:Date.now(),mouse:i===!0,dir:!1}},move(a){if(t.event===void 0)return;if(t.event.dir!==!1){O(a);return}const i=Date.now()-t.event.time;if(i===0)return;const m=Y(a),y=m.left-t.event.x,p=Math.abs(y),_=m.top-t.event.y,v=Math.abs(_);if(t.event.mouse!==!0){if(p<t.sensitivity[1]&&v<t.sensitivity[1]){t.end(a);return}}else if(window.getSelection().toString()!==""){t.end(a);return}else if(p<t.sensitivity[2]&&v<t.sensitivity[2])return;const S=p/i,x=v/i;t.direction.vertical===!0&&p<v&&p<100&&x>t.sensitivity[0]&&(t.event.dir=_<0?"up":"down"),t.direction.horizontal===!0&&p>v&&v<100&&S>t.sensitivity[0]&&(t.event.dir=y<0?"left":"right"),t.direction.up===!0&&p<v&&_<0&&p<100&&x>t.sensitivity[0]&&(t.event.dir="up"),t.direction.down===!0&&p<v&&_>0&&p<100&&x>t.sensitivity[0]&&(t.event.dir="down"),t.direction.left===!0&&p>v&&y<0&&v<100&&S>t.sensitivity[0]&&(t.event.dir="left"),t.direction.right===!0&&p>v&&y>0&&v<100&&S>t.sensitivity[0]&&(t.event.dir="right"),t.event.dir!==!1?(O(a),t.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ie(),t.styleCleanup=s=>{t.styleCleanup=void 0,document.body.classList.remove("non-selectable");const r=()=>{document.body.classList.remove("no-pointer-events--children")};s===!0?setTimeout(r,50):r()}),t.handler({evt:a,touch:t.event.mouse!==!0,mouse:t.event.mouse,direction:t.event.dir,duration:i,distance:{x:p,y:v}})):t.end(a)},end(a){t.event!==void 0&&(z(t,"temp"),N.is.firefox===!0&&F(e,!1),t.styleCleanup!==void 0&&t.styleCleanup(!0),a!==void 0&&t.event.dir!==!1&&O(a),t.event=void 0)}};if(e.__qtouchswipe=t,d.mouse===!0){const a=d.mouseCapture===!0||d.mousecapture===!0?"Capture":"";V(t,"main",[[e,"mousedown","mouseStart",`passive${a}`]])}N.has.touch===!0&&V(t,"main",[[e,"touchstart","touchStart",`passive${d.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,n){const u=e.__qtouchswipe;u!==void 0&&(n.oldValue!==n.value&&(typeof n.value!="function"&&u.end(),u.handler=n.value),u.direction=X(n.modifiers))},beforeUnmount(e){const n=e.__qtouchswipe;n!==void 0&&(z(n,"main"),z(n,"temp"),N.is.firefox===!0&&F(e,!1),n.styleCleanup!==void 0&&n.styleCleanup(),delete e.__qtouchswipe)}});function ie(){const e=new Map;return{getCache:function(n,u){return e[n]===void 0?e[n]=u:e[n]},getCacheWithFn:function(n,u){return e[n]===void 0?e[n]=u():e[n]}}}const Ge={name:{required:!0},disable:Boolean},ee={setup(e,{slots:n}){return()=>f("div",{class:"q-panel scroll",role:"tabpanel"},k(n.default))}},Ve={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},$e=["update:modelValue","beforeTransition","transition"];function Re(){const{props:e,emit:n,proxy:u}=Q(),{getCacheWithFn:d}=ie();let o,t;const a=A(null),i=A(null);function m(l){const b=e.vertical===!0?"up":"left";I((u.$q.lang.rtl===!0?-1:1)*(l.direction===b?1:-1))}const y=g(()=>[[Ee,m,void 0,{horizontal:e.vertical!==!0,vertical:e.vertical,mouse:!0}]]),p=g(()=>e.transitionPrev||`slide-${e.vertical===!0?"down":"right"}`),_=g(()=>e.transitionNext||`slide-${e.vertical===!0?"up":"left"}`),v=g(()=>`--q-transition-duration: ${e.transitionDuration}ms`),S=g(()=>typeof e.modelValue=="string"||typeof e.modelValue=="number"?e.modelValue:String(e.modelValue)),x=g(()=>({include:e.keepAliveInclude,exclude:e.keepAliveExclude,max:e.keepAliveMax})),s=g(()=>e.keepAliveInclude!==void 0||e.keepAliveExclude!==void 0);be(()=>e.modelValue,(l,b)=>{const q=E(l)===!0?j(l):-1;t!==!0&&M(q===-1?0:q<j(b)?-1:1),a.value!==q&&(a.value=q,n("beforeTransition",l,b),Ce(()=>{n("transition",l,b)}))});function r(){I(1)}function c(){I(-1)}function C(l){n("update:modelValue",l)}function E(l){return l!=null&&l!==""}function j(l){return o.findIndex(b=>b.props.name===l&&b.props.disable!==""&&b.props.disable!==!0)}function le(){return o.filter(l=>l.props.disable!==""&&l.props.disable!==!0)}function M(l){const b=l!==0&&e.animated===!0&&a.value!==-1?"q-transition--"+(l===-1?p.value:_.value):null;i.value!==b&&(i.value=b)}function I(l,b=a.value){let q=b+l;for(;q>-1&&q<o.length;){const G=o[q];if(G!==void 0&&G.props.disable!==""&&G.props.disable!==!0){M(l),t=!0,n("update:modelValue",G.props.name),setTimeout(()=>{t=!1});return}q+=l}e.infinite===!0&&o.length!==0&&b!==-1&&b!==o.length&&I(l,l===-1?o.length:-1)}function W(){const l=j(e.modelValue);return a.value!==l&&(a.value=l),!0}function H(){const l=E(e.modelValue)===!0&&W()&&o[a.value];return e.keepAlive===!0?[f(ae,x.value,[f(s.value===!0?d(S.value,()=>({...ee,name:S.value})):ee,{key:S.value,style:v.value},()=>l)])]:[f("div",{class:"q-panel scroll",style:v.value,key:S.value,role:"tabpanel"},[l])]}function ue(){if(o.length!==0)return e.animated===!0?[f(ne,{name:i.value},H)]:H()}function ce(l){return o=ye(k(l.default,[])).filter(b=>b.props!==null&&b.props.slot===void 0&&E(b.props.name)===!0),o.length}function de(){return o}return Object.assign(u,{next:r,previous:c,goTo:C}),{panelIndex:a,panelDirectives:y,updatePanelsList:ce,updatePanelIndex:W,getPanelContent:ue,getEnabledPanels:le,getPanels:de,isValidPanelName:E,keepAliveProps:x,needsUniqueKeepAliveWrapper:s,goToPanelByOffset:I,goToPanel:C,nextPanel:r,previousPanel:c}}function se(e){return f("div",{class:"q-stepper__step-content"},[f("div",{class:"q-stepper__step-inner"},k(e.default))])}const te={setup(e,{slots:n}){return()=>se(n)}};var U=D({name:"QStep",props:{...Ge,icon:String,color:String,title:{type:String,required:!0},caption:String,prefix:[String,Number],doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String,headerNav:{type:Boolean,default:!0},done:Boolean,error:Boolean,onScroll:[Function,Array]},setup(e,{slots:n,emit:u}){const{proxy:{$q:d}}=Q(),o=Se(re,K);if(o===K)return console.error("QStep needs to be a child of QStepper"),K;const{getCacheWithFn:t}=ie(),a=A(null),i=g(()=>o.value.modelValue===e.name),m=g(()=>d.platform.is.ios!==!0&&d.platform.is.chrome===!0||i.value!==!0||o.value.vertical!==!0?{}:{onScroll(_){const{target:v}=_;v.scrollTop>0&&(v.scrollTop=0),e.onScroll!==void 0&&u("scroll",_)}}),y=g(()=>typeof e.name=="string"||typeof e.name=="number"?e.name:String(e.name));function p(){const _=o.value.vertical;return _===!0&&o.value.keepAlive===!0?f(ae,o.value.keepAliveProps.value,i.value===!0?[f(o.value.needsUniqueKeepAliveWrapper.value===!0?t(y.value,()=>({...te,name:y.value})):te,{key:y.value},n.default)]:void 0):_!==!0||i.value===!0?se(n):void 0}return()=>f("div",{ref:a,class:"q-stepper__step",role:"tabpanel",...m.value},o.value.vertical===!0?[f(oe,{stepper:o.value,step:e,goToPanel:o.value.goToPanel}),o.value.animated===!0?f(Be,p):p()]:[p()])}}),Le=D({name:"QStepperNavigation",setup(e,{slots:n}){return()=>f("div",{class:"q-stepper__nav"},k(n.default))}});const Qe=/(-\w)/g;function je(e){const n={};for(const u in e){const d=u.replace(Qe,o=>o[1].toUpperCase());n[d]=e[u]}return n}var Fe=D({name:"QStepper",props:{...xe,...Ve,flat:Boolean,bordered:Boolean,alternativeLabels:Boolean,headerNav:Boolean,contracted:Boolean,headerClass:String,inactiveColor:String,inactiveIcon:String,doneIcon:String,doneColor:String,activeIcon:String,activeColor:String,errorIcon:String,errorColor:String},emits:$e,setup(e,{slots:n}){const u=Q(),d=we(e,u.proxy.$q),{updatePanelsList:o,isValidPanelName:t,updatePanelIndex:a,getPanelContent:i,getPanels:m,panelDirectives:y,goToPanel:p,keepAliveProps:_,needsUniqueKeepAliveWrapper:v}=Re();qe(re,g(()=>({goToPanel:p,keepAliveProps:_,needsUniqueKeepAliveWrapper:v,...e})));const S=g(()=>`q-stepper q-stepper--${e.vertical===!0?"vertical":"horizontal"}`+(e.flat===!0?" q-stepper--flat":"")+(e.bordered===!0?" q-stepper--bordered":"")+(d.value===!0?" q-stepper--dark q-dark":"")),x=g(()=>`q-stepper__header row items-stretch justify-between q-stepper__header--${e.alternativeLabels===!0?"alternative":"standard"}-labels`+(e.flat===!1||e.bordered===!0?" q-stepper__header--border":"")+(e.contracted===!0?" q-stepper__header--contracted":"")+(e.headerClass!==void 0?` ${e.headerClass}`:""));function s(){const r=k(n.message,[]);if(e.vertical===!0){t(e.modelValue)&&a();const c=f("div",{class:"q-stepper__content"},k(n.default));return r===void 0?[c]:r.concat(c)}return[f("div",{class:x.value},m().map(c=>{const C=je(c.props);return f(oe,{key:C.name,stepper:e,step:C,goToPanel:p})})),r,Te("div",{class:"q-stepper__content q-panel-parent"},i(),"cont",e.swipeable,()=>y.value)]}return()=>(o(n),f("div",{class:S.value},Pe(n.navigation,s())))}}),Oe="/assets/step1.5f38d7b4.gif",ze="/assets/step2.dff983d6.gif",Ke="/assets/step3.612bd1d4.gif";const Ue={class:"q-pa-md"},Me={class:"row q-gutter-md justify-center"},We=h("div",{class:"col-6"},[h("img",{style:{width:"100%"},class:"image",src:Oe})],-1),He={class:"col-5"},Ye=h("h6",null,"1.1 Import sample information separately or by a file.",-1),Xe=h("p",null," Simply input prepared sample information. Group can be left if there is no replication. In this case, group name will be filled with sample name. Remember to add sample after filling the form. A formatted excel can be read by CrisprStitch to automatically import sample information. ",-1),Je=h("h6",null," 1.2 Check and config sample information in the reactive table. ",-1),Ze={class:"row q-gutter-md justify-center"},et=h("div",{class:"col-6"},[h("img",{style:{width:"100%"},class:"image",src:ze})],-1),tt={class:"col-5"},nt=h("h6",null,"2 Import FASTQ files and target site sequences.",-1),at=h("p",null," Paired-end fastq files can be uploaded in one file input. Otherwise upload a single file if merging is not needed, in which case merging step will be skipped. ",-1),rt=h("p",null," Examples of sequencing files in fastq and target site file in fasta are as follows. ",-1),ot=h("div",{class:"row q-gutter-md justify-center"},[h("div",{class:"col-6"},[h("img",{style:{width:"100%"},class:"image",src:Ke})]),h("div",{class:"col-5"},[h("h6",null,"3.1 The first part is a summary table."),h("p",null," The first part is a summary table of all samples, which can also be exported to csv. "),h("h6",null,"3.2 Downloadable charts for each group are provided."),h("p",null," The second part is a downloadable chart for each group, showing genome-editing outcomes within the target region. Deletion, insertion and substitution are included. All charts can be saved as PDFs for further editing. Alignment results can be exported as text files. ")])],-1),ct=Ae({__name:"GuidancePage",setup(e){const n=A(1),u=A();function d(){const t=Z.book_new();t.Props={Title:"CrisprStitch Example",Subject:"Example",Author:"hanys"},t.SheetNames.push("1");const a=[["Sample","Barcode_L","Barcode_R","gRNA_PAM","Gene","Group"],["TX-2","TTAGGC","TGACCA","tttgGAGTGAAATCTCTTGTCTTAAGG","OsPDS-site01","pYPQ203-AsCpf1-OsPDS-crRNA01"]];t.Sheets[1]=Z.aoa_to_sheet(a),Ne(t,"crisprstitch_example.xlsx")}function o(){const t=`>OsPDS-site01
ctggctgcctgtcatctatgaacataactggaaccagccaagcaagatcttttgcgggacaacttcctactcataggtgcttcgcaagtagcagcatccaagcactgaaaagtagtcagcatgtgagctttgGAGTGAAATCTCTTGTCTTAAGGaataaaggaaaaagattccgtcggaggctcggtgctctacaggttcaacctttgtactctattattgcctcacattccatctcttgtgaaaatatatttgattggcttttctgcaggttgtttgccaggactttccaagacctcc`;let a=URL.createObjectURL(new Blob([t],{type:"text/plain"}));const i=document.createElement("a");i.setAttribute("href",a),i.setAttribute("download","target site.fasta"),i.style.display="none",i.click()}return(t,a)=>(B(),ke("div",Ue,[P(Fe,{modelValue:n.value,"onUpdate:modelValue":a[2]||(a[2]=i=>n.value=i),ref_key:"stepper",ref:u,color:"primary",animated:""},{navigation:w(()=>[P(Le,null,{default:w(()=>[n.value!==3?(B(),$(T,{key:0,onClick:a[0]||(a[0]=i=>u.value.next()),color:"primary",label:"Continue"})):R("",!0),n.value===3?(B(),$(T,{key:1,to:"/input",color:"primary",label:"Get Start"})):R("",!0),n.value>1?(B(),$(T,{key:2,flat:"",color:"primary",onClick:a[1]||(a[1]=i=>u.value.previous()),label:"Back",class:"q-ml-sm"})):R("",!0),n.value===3?(B(),$(T,{key:3,href:"https://bioinfor.yzu.edu.cn/software/crisprstitch",color:"primary",label:"Video tutorial",target:"_blank"})):R("",!0)]),_:1})]),default:w(()=>[P(U,{name:1,title:"Input Sample information",icon:"settings",done:n.value>1},{default:w(()=>[h("div",Me,[We,h("div",He,[Ye,Xe,P(T,{flat:"",color:"secondary",onClick:d},{default:w(()=>[L("download example")]),_:1}),Je])])]),_:1},8,["done"]),P(U,{name:2,title:"Input sequenceing data",caption:"Optional",icon:"create_new_folder",done:n.value>2},{default:w(()=>[h("div",Ze,[et,h("div",tt,[nt,at,rt,P(T,{flat:"",color:"secondary",href:"https://bioinfor.yzu.edu.cn/download/crisprstitch/SRR5082532_1.fastq.gz"},{default:w(()=>[L("fastq1")]),_:1}),P(T,{flat:"",color:"secondary",href:"https://bioinfor.yzu.edu.cn/download/crisprstitch/SRR5082532_2.fastq.gz"},{default:w(()=>[L("fastq2")]),_:1}),P(T,{flat:"",color:"secondary",onClick:o},{default:w(()=>[L("target site")]),_:1})])])]),_:1},8,["done"]),P(U,{name:3,title:"Get result",icon:"assignment"},{default:w(()=>[ot]),_:1})]),_:1},8,["modelValue"])]))}});export{ct as default};
